{"ast":null,"code":"var _jsxFileName = \"/home/zhana/Desktop/school-app/src/components/app/app.js\";\nimport React, { Component } from \"react\";\nimport ValidatedSchoolForm from '../schoolForm';\nimport SchoolTable from '../schoolTable';\nimport '../studentsTable';\nimport \"./app.css\";\nconst globalData = [{\n  id: 3,\n  schoolName: \"№34\",\n  address: \"Chavchavadze 23\",\n  students: [{\n    fullName: \"Megi Jikia\",\n    email: \"megijikia@gmail.com\",\n    age: 17\n  }, {\n    fullName: \"Genji Genji\",\n    email: \"genjigenji@gmail.com\",\n    age: 18\n  }]\n}, {\n  id: 2,\n  schoolName: \"№98\",\n  address: \"Vazha 8\",\n  students: [{\n    fullName: \"Davit Bokhua\",\n    email: \"davitbokhua@gmail.com\",\n    age: 18\n  }, {\n    fullName: \"Vato Vatexa\",\n    email: \"vatovatexa@gmail.com\",\n    age: 17\n  }]\n}, {\n  id: 1,\n  schoolName: \"№108\",\n  address: \"Tsereteli 3\",\n  students: [{\n    fullName: \"Elene Kvaratskhelia\",\n    email: \"eleneKvaratskhelia@gmail.com\",\n    age: 18\n  }, {\n    fullName: \"Zhana Jikia\",\n    email: \"zhanajikia@gmail.com\",\n    age: 17\n  }]\n}];\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      schools: globalData,\n      currentStudents: []\n    };\n\n    this.callbackFunction = childData => {\n      this.setState({\n        schools: [childData, ...this.state.schools]\n      });\n    };\n\n    this.setStudents = (student, id) => {\n      this.setState(({\n        schools\n      }) => {\n        const newSchools = schools;\n        const found = newSchools.find(item => item.id === id);\n        found.students = [...found.students, student];\n        return {\n          schools: newSchools,\n          currentStudents: found.students\n        };\n      });\n    };\n\n    this.setCurrentStudents = students => this.setState({\n      currentStudents: students\n    });\n\n    this.onDeleted = id => {\n      this.setState(({\n        schools\n      }) => {\n        const index = schools.findIndex(el => el.id === id);\n        const newSchools = [...schools.slice(0, index), ...schools.slice(index + 1)];\n        return {\n          schools: newSchools\n        };\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Add New School\"), React.createElement(ValidatedSchoolForm, {\n      schools: this.state.schools,\n      handleAdd: this.callbackFunction,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(SchoolTable, {\n      schools: this.state.schools,\n      setStudents: this.setStudents,\n      students: this.state.students,\n      setCurrentStudents: this.setCurrentStudents,\n      currentStudents: this.state.currentStudents,\n      onDeleted: this.onDeleted,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/zhana/Desktop/school-app/src/components/app/app.js"],"names":["React","Component","ValidatedSchoolForm","SchoolTable","globalData","id","schoolName","address","students","fullName","email","age","App","state","schools","currentStudents","callbackFunction","childData","setState","setStudents","student","newSchools","found","find","item","setCurrentStudents","onDeleted","index","findIndex","el","slice","render"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport ValidatedSchoolForm from '../schoolForm';\nimport SchoolTable from '../schoolTable';\nimport '../studentsTable';\nimport \"./app.css\";\n\n\nconst globalData = [\n  {\n    id: 3,\n    schoolName: \"№34\",\n    address: \"Chavchavadze 23\",\n    students: [\n      { fullName: \"Megi Jikia\", email: \"megijikia@gmail.com\", age: 17 },\n      { fullName: \"Genji Genji\", email: \"genjigenji@gmail.com\", age: 18 },\n\n    ]\n  },\n  {\n    id: 2,\n    schoolName: \"№98\",\n    address: \"Vazha 8\",\n    students: [\n      { fullName: \"Davit Bokhua\", email: \"davitbokhua@gmail.com\", age: 18 },\n      { fullName: \"Vato Vatexa\", email: \"vatovatexa@gmail.com\", age: 17 },\n    ]\n  },\n  {\n    id: 1,\n    schoolName: \"№108\",\n    address: \"Tsereteli 3\",\n    students: [\n      { fullName: \"Elene Kvaratskhelia\", email: \"eleneKvaratskhelia@gmail.com\", age: 18 },\n      { fullName: \"Zhana Jikia\", email: \"zhanajikia@gmail.com\", age: 17 }\n    ]\n  }\n];\n\nexport default class App extends Component {\n\n  state = {\n    schools: globalData,\n    currentStudents: []\n  }\n\n  callbackFunction = (childData) => {\n    this.setState({schools: [childData, ...this.state.schools ]})\n  }\n\n  setStudents = (student, id) => {\n    this.setState(({ schools }) => {\n      const newSchools = schools\n      const found = newSchools.find(item => item.id === id)\n      found.students = [...found.students, student]\n      return ({\n        schools: newSchools,\n        currentStudents:  found.students\n      })\n    })\n  }\n\n  setCurrentStudents = (students) => (\n    this.setState({ currentStudents: students })\n  )\n\n  onDeleted = (id) => {\n    this.setState( ({ schools }) => {\n      const index = schools.findIndex( (el) => el.id === id);\n\n      const newSchools = [ \n        ...schools.slice(0, index),\n        ...schools.slice(index + 1) \n      ];\n      \n      return {\n        schools: newSchools\n      }\n    })\n  };\n  \n\n  render(){\n    return (\n      <div className=\"App\">\n        <h1>Add New School</h1>\n        <ValidatedSchoolForm\n          schools={this.state.schools}\n          handleAdd={this.callbackFunction}\n        />\n        {/* <SchoolTable\n          schools={this.state.schools}\n          onDeleted={this.onDeleted}\n          setStudents={this.setStudents}\n          students={this.state.students}\n          setCurrentStudents={this.setCurrentStudents}\n          currentStudents={this.state.currentStudents}\n        /> */}\n        <SchoolTable\n          schools={this.state.schools}\n          setStudents={this.setStudents}\n          students={this.state.students}\n          setCurrentStudents={this.setCurrentStudents}\n          currentStudents={this.state.currentStudents}\n          onDeleted={this.onDeleted}\n        />\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}